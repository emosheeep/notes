# DNS

## 意义

点分十进制的IP地址太难记忆，所以引入了域名，有了域名，自然需要映射关系

## 过程

- 首先向本地DNS服务器发起请求，本地服务器**检查缓存**，若未命中缓存则向根域名服务器发送查询请求。
- 根域名服务器返回**顶级域名**列表
- 本地服务器再通过顶级域名列表查询**次级域名**
- 次级域名服务器返回**主机**列表，查询完毕

根域名服务器一共有13台（a~m）

# DHCP动态地址主机配置协议

DHCP工作在局域网内，基于**UDP**协议。

## 解决什么问题

终端上网必须要配置IP地址，但是诸如手机平板等设备经常移动位置，固定配置IP极其繁琐，所以有了DHCP协议，用于自动设置IP地址

## 过程

- 局域网内主要靠MAC地址分发内容，一个不知道自己IP地址的终端需要向DCHP服务发送报文，请求需要的信息。
- 以太网报文头部中，源MAC地址填自己的，而目标MAC地址填DCHP服务器的，由于不知道，则填全F，相当于广播地址。
- IP报文头部中，源IP不知道，填0.0.0.0，目标IP是DCHP服务器的，不知道，填255.255.255.255
- UDP头部中，源端口68，目的端口67，这是DCHP协议规定好的
- 由于是广播，局域网内每台计算机都会收到，看不出是发给谁的。当看到发出方IP地址是0.0.0.0，接收方是255.255.255.255，于是DHCP服务器知道"这个包是发给我的"，而其他计算机就可以丢弃这个包。
- DCHP服务器

读出这个包的数据内容，分配好IP地址，发回去一个响应数据包，于是新进入网络的终端就知道了自己的IP地址、子网掩码、网关地址、DNS服务器等参数